<!DOCTYPE html>
<html lang="es">
<header>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alexander's Pool</title>
    <script src="jquery.js"></script>
    <script src="jquery.datetimepicker.full.min.js"></script>
    <link rel="stylesheet" href="jquery.datetimepicker.min.css">
    <link rel="stylesheet" href="styles.css">
</header>
<body>
    <header>
        <div id="navbar-left">
            <button id="Boton-Inicio">&#9776; Menu</button>
        </div>
        <div id="navbar-center">
            <div class='Titulo'></div>
        </div>
        <div id="navbar-right">
            <a href="https://www.facebook.com/p/Alexanders-Pool-100057492817523/">
            <div class='Logo'>
            </div>
            </a>
        </div>
    </header>

    <nav id="sidebar">
        <ul>
            <li><button id="Boton-Final">&#9776; Menu</button></a></li>
            <li></li>
            <li></li>
            <li><a href="#inicio">Inicio</a></li>
            <li><a href="#agenda">Agenda</a></li>
            <li><a href="#contacto">Contacto</a></li>
        </ul>
    </nav>

    <section id="inicio">
        <div class="container">
            <h1>Bienvenido!</h1>
            <p>Tu lugar perfecto para disfrutar del sol y el agua.</p>
            <div id="InicioDividido">
                <div id="Informacion">
                    <h3>Conocenos!</h3>
                    <li>Lunes a Jueves: $1500</li>
                    <li>Viernes: $2500</li>
                    <li>Sabado y Domingo: $3000</li>
                    <li>7 horas/Incluye 1h para Decorar</li>
                    <li>Limite las 12 de la noche</li>

                    <h3>Contamos con</h3>
                    <li>Mobiliario para 55-60 personas</li>
                    <li>Asador y Barra</li>
                    <li>Bocina amplificada</li>
                    <li>TV Cable y Wifi</li>
                    <li>Chapoteadero</li>
                    <li>Baños hombre y mujer</li>
                    <li>Regadera</li>
                    <li>Luces panoramicas</li>
                    <li>Microondas</li>
                    <li>Refrigerador</li>
                </div>
                <img src="FotoInicial.jpg">
            </div>
        </div>
    </section>

    <section id="agenda">
        <div class="container">
            <h2>Agenda tu Visita</h2>
            <p>Reserva tu día y hora para disfrutar de nuestra piscina.</p>
            <button class="btn" id="abrir-modal">Reservar</button>
            <div class="Imagenes">
                <img src="Foto1.jpg">
                <img src="Foto2.jpg">
            </div>
        </div>
    </section>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Reservar</h3>
            <p>Ingrese los datos solicitados para agendar su reserva</p>

            <div id="VentanaModal">
            <form id="reserva-form">
                <label for="Fecha">Fecha:</label> 
                <input type="text" id="timedatePicker" required>

                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" required>
    
                <label for="telefono">Teléfono:</label>
                <input type="text" id="telefono" required>

                <label for="email">Correo Electronico:</label>
                <input type="email" id="email" required>
    
                <p id="monto-final-text">Monto Final:</p>
                <p id="anticipo-text">Anticipo:</p>
                <div id="Pago">
                    <div id="Header">
                    </div>
                    <div id="ImgPago">
                        <div>
                            <img src="PayPal.png">
                        </div>
                        <div>
                            <img src="Visa.png">
                        </div>
                        <div>
                            <img src="MasterCard.png">
                        </div>
                        <div>
                            <img src="OXXO.png">
                        </div>
                    </div>
                    <div id="Factura">
                        <input type='checkbox' id="Fact"> <label>Desea Factura?</label>
                    </div>
                    <div>
                        <button type="button" class="btnModal" id="MostrarMensaje">Reserva Ahora</button>
                    </div>
                </div>
            </form>
            <div id="ImagenModal">

            </div>
        </div>

        </div>
    </div>

    <div id="Mensaje" class="modal">
        <div class="modal-content">
            <span class="cerrar" id="CerrarAgradecimiento">&times;</span>
            <h3>Agradecimiento</h3>
            <p>¡Gracias por su reserva!</p>
        </div>
    </div>

    <div id="Error" class="modal">
        <div class="modal-content">
            <span class="cerrar" id="CerrarError">&times;</span>
            <h3>Error!</h3>
            <p>Ha ocurrido un error en el sistema</p>
        </div>
    </div>

    <div id="Advertencia" class="modal">
        <div class="modal-content">
            <span class="cerrar" id="CerrarAdv">&times;</span>
            <h3>Advertencia</h3>
            <p id="Adv"></p>
        </div>
    </div>

    <section id="contacto">
        <div class="container">
            <h2>Contacto</h2>
            <p>¿Tienes alguna pregunta o consulta? ¡Contáctanos!</p>
            <p>Direccion: Valdez Reyna 503 colonia Nueva Era</p>
            <p>Teléfono: 867-141-7913</p>
        </div>
    </section>

    <footer>
        <p>&copy;Alexander's Pool</p>
    </footer>

    <script src="https://unpkg.com/jspdf-invoice-template@1.4.0/dist/index.js"></script>
    <script>
        const Arreglo = ['Prueba1','Prueba2','Prueba3'];
        const Clausulas = [
                'QUEDA EXPRESAMENTE PROHIBIDO SUB ARRENDAR O TRASPASAR TODA PARTE DEL INMUEBLE ARRENDADOR.',
                'EL ARRENDATARIO RECIBE EL INMUEBLE CON TODO EL SERVICIO SANITARIO EN PERFECTO ESTADO EL CUAL SE COMPROMETE DEL LA MISMA MANERA.',
                'EN CASO DE UN DAÑO AL MOBILIARIO TENDRA QUE HACERSE RESPONSABLE EL ARRENDATARIO,',
                'DEBERA DE LIQUIDAR EN SU TOTALIDAD UNA SEMANA ANTES DE FECHA DEL EVENTO',
                'ES OBLIGATORIO USAR ROPA ADECUADA',
                'SE PROHIBE COMER, FUMAR Y BEBER DENTRO DE LA ALBERCA LA ALBERCA Alexanders Pool NO SE HACE RESPONSABLE EN CASO DE ROBO O CONFLICTOS AJENOS AL NEGOCIO.',
                'AL FINAL DEL EVENTO FAVOR DE TIRAR SU BASURA',
            ]

        function FechaActual(){
            const fechaActual = new Date();
            const año = fechaActual.getFullYear();
            const mes = fechaActual.getMonth() + 1; 
            const dia = fechaActual.getDate();
            const fechaFormateada = `${año}/${mes < 10 ? '0' + mes : mes}/${dia < 10 ? '0' + dia : dia}`;
            return fechaFormateada;
        }

        $("#MostrarMensaje").on("click", function() {
            if($("#nombre").val()!=""&&$("#telefono").val()!=""&&$("#timedatePicker").val()!="")
            $("#Mensaje").toggle();
        });

        $("#CerrarAgradecimiento").on("click", function() {
            $("#Mensaje").toggle();
        });

        $("#MostrarError").on("click", function() {
            $("#Error").toggle();
        });

        $("#CerrarError").on("click", function() {
            $("#Error").toggle();
        });

        $("#MostrarAdv").on("click", function() {
            const lista = $("<ul></ul>");

            Arreglo.forEach(function(item) {
                const Elemento = $("<li></li>").text(item); 
                lista.append(Elemento); 
            });

            $('#Adv').empty().append(lista); 
            $("#Advertencia").toggle(); 
        });

        $("#CerrarAdv").on("click", function() {
            $("#Advertencia").toggle();
        });

        $("#Boton-Inicio, #Boton-Final").on("click", function() {
            $("#sidebar").toggleClass("show-sidebar");
        });
        
        $('#MostrarMensaje').on('click',async()=>{
            var Fecha = $('#timedatePicker').val();
            var Nombre = $('#nombre').val();
            var Telefono = $('#telefono').val();
            var Email = $('#email').val();
            var Anticipo = $('#anticipo-text');
            var MFinal = $('#monto-final-text');

            props.contact.name = Nombre;
            props.contact.phone = Telefono;
            props.contact.email = Email;
            props.invoice.invDate = "Fecha de Pago: " + FechaActual();
            props.invoice.invGenDate = "Fecha del Evento: " + Fecha; 
            props.contact.address = Anticipo.text() + ' ' + MFinal.text();

            if($('#Fact').is(':checked')){
                var pdfObject = jsPDFInvoiceTemplate.default(props);

            console.log("PDF Creado",pdfObject)
            }
        })

        var props = {
        outputType: jsPDFInvoiceTemplate.OutputType.Save,
    returnJsPDFDocObject: true,
    fileName: "Factura",
    orientationLandscape: true,
    compress: true,
    logo: {
        src: "Logo.png",
        type: 'PNG', //optional, when src= data:uri (nodejs case)
        width: 53.33, //aspect ratio = width/height
        height: 26.66,
        margin: {
            top: 0, //negative or positive num, from the current position
            left: 0 //negative or positive num, from the current position
        }
    },
    stamp: {
        inAllPages: true, //by default = false, just in the last page
        src: "https://raw.githubusercontent.com/edisonneza/jspdf-invoice-template/demo/images/qr_code.jpg",
        type: 'JPG', //optional, when src= data:uri (nodejs case)
        width: 20, //aspect ratio = width/height
        height: 20,
        margin: {
            top: 0, //negative or positive num, from the current position
            left: 0 //negative or positive num, from the current position
        }
    },
    business: {
        name: "Alexander's Pool",
        address: "Valdez Reyna 503 colonia Nueva Era",
        phone: "Teléfono: 867-141-7913",
        website: "https://www.facebook.com/profile.php?id=100057492817523",
    },
    contact: {
        label: "Contratacion realizada por:",
        name: "Contacto",
        address: '',
        phone: "432432",
        email: "423432@32.com",
    },
    invoice: {
        label: "Reserva#",
        num: 1,
        invDate: '24/nov/23',
        invGenDate:'12/y=/64',
        headerBorder: false,
        tableBodyBorder: false,
        header: [
          {
            title: "ID#", 
            style: { 
              width: 10 
            } 
          }, 
          { 
            title: "Clausula",
            style: {
            width: 200
            } 
          }, 
        ],
        table: Array.from(Clausulas, (item, index)=>([
            index,
            item
        ])),
        invDescLabel: "NOTA:",
        invDesc: "Este documento es válido como comprobante de la transacción realizada. Para cualquier consulta o reclamo, por favor, comuníquese con nuestro servicio de atención al cliente dentro de los próximos 30 días a partir de la fecha de emisión de esta factura. Toda devolución está sujeta a nuestras políticas de reembolso y puede requerir la presentación de este comprobante, En caso de cancelacion por parte del contratante, no habra devolucion del anticipo, ademas se le cobrara un monto de 1000$",
    },
    footer: {
        text: "Esta factura fue creada de forma automatica, cualquier problema contacte al administrador",
    },
    pageEnable: true,
    pageLabel: "Page ",
};
        $(document).ready(function () {
            const modal = $("#myModal");
            const abrirModal = $("#abrir-modal");
            const cerrarModal = $(".close");
            const montoFinalText = $("#monto-final-text");
            const Anticipo = $('#anticipo-text')

            $('#timedatePicker').datetimepicker();

            abrirModal.click(function () {
                modal.css("display", "block");
            });

            cerrarModal.click(function () {
                modal.css("display", "none");
            });

            $('#timedatePicker').on('change', function (e) {
            const selectedDate = new Date($(this).val());
            const dayOfWeek = selectedDate.getDay(); 

            if (dayOfWeek === 5) 
            { 
                montoFinalText.text("Monto Final: 2500");
                Anticipo.text('Anticipo: 500')
            } else if (dayOfWeek === 0 || dayOfWeek === 6)
            {
                montoFinalText.text("Monto Final: 3000");
                Anticipo.text('Anticipo: 600')
            }
            else {
                montoFinalText.text("Monto Final: 1500");
                Anticipo.text('Anticipo: 300')
            }
            });

            
        });
    </script>
</body>
</html>
